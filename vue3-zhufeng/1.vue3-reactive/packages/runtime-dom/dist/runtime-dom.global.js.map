{"version":3,"file":"runtime-dom.global.js","sources":["../../shared/src/index.ts","../src/nodeOps.ts","../src/modules/attr.ts","../src/modules/class.ts","../src/modules/events.ts","../src/modules/style.ts","../src/patchProp.ts","../../reactivity/src/effect.ts","../../reactivity/src/baseHandlers.ts","../../reactivity/src/reactive.ts","../../reactivity/src/ref.ts","../../reactivity/src/computed.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/apiCreateApp.ts","../../runtime-core/src/componentPublicInstance.ts","../../runtime-core/src/component.ts","../../runtime-core/src/renderer.ts","../../runtime-core/src/h.ts","../src/index.ts"],"sourcesContent":["export const isObject = (value) => typeof value == 'object' && value !== null;\nexport const extend = Object.assign\nexport const isArray = Array.isArray;\nexport const isFunction = (value) => typeof value == 'function'\nexport const isNumber = (value) => typeof value == 'number';\nexport const isString = (value) => typeof value === 'string';\nexport const isIntegerKey = (key) => parseInt(key) + '' === key;\n\n\nlet hasOwnpRroperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (target, key) => hasOwnpRroperty.call(target, key);\n\nexport const hasChanged = (oldValue,value) => oldValue !== value\n\nexport * from './shapeFlag'","export const nodeOps = {\n  createElement: tagName => document.createElement(tagName),\n  remove: child => {// 删除\n      const parent = child.parentNode;\n      if(parent){\n        parent.removeChild(child)\n      }\n  },\n  insert: (child, parent, anchor = null) => {\n    parent.insertBefore(child, anchor); // \n  },\n  querySelector: selector => document.querySelector(selector),\n  setElementText: (el, text) => el.textContent = text,\n  createText: text => document.createTextNode(text),\n  setText: (node, text) => node.nodeValue = text\n}","\n\nexport const patchAttr = (el,key,value) =>{\n  if(value == null){\n      el.removeAttribute(key);\n  }else {\n      el.setAttribute(key,value);\n  }\n}","export const patchClass = (el ,value) => {\n  if(value == null){\n    value = ''\n  }\n  el.className = value\n}\n","export const patchEvent = (el, key, value) => {\n  // 对函数的缓存\n  const invokers = el._vei || (el._vei || {})\n  const exists = invokers[key]; // 如果不存在\n  if(value && exists){ // 更新绑定事件\n    exists.value = value;\n  }else{\n    const eventName = key.slice(2).toLowerCase()\n    if(value){ // 之前没有绑定过现在绑定\n      let invoker = invokers[key] = createInvoker(value);\n       el.addEventListener(eventName,invoker)\n    }else{\n      if(exists){ // 以前绑定了 当时没有value\n        el.removeEventListener(eventName,exists);\n        // invokers[key] = undefined;\n        delete invokers[key]\n      }\n    }\n  }\n}\n\nfunction createInvoker(value) {\n  const invoker = (e) => { invoker.value(e)} \n  invoker.value = value;\n  return invoker\n}","export const patchStyle = (el,prev,next) =>{ // cssText;\n  const style = el.style; //获取样式 \n  if(next == null){\n      el.removeAttribute('style') // {style:{}}  {}\n  }else{\n      // 老的里新的有没有 \n      if(prev){  // {style:{color}} => {style:{background}}\n          for(let key in prev){\n              if(next[key] == null){ // 老的里有 新的里没有 需要删除\n                  style[key] = '';\n              }\n          }\n      }\n      // 新的里面需要赋值到style上\n      for(let key in next){ // {style:{color}} => {style:{background}}\n          style[key] = next[key];\n      }\n  }\n\n}","import { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/events\";\nimport { patchStyle } from \"./modules/style\";\n\n// 这个里面针对的是属性操作\nexport const patchProp = (el, key, preValue, nextValue) => {\n  switch (key) {\n    case \"class\":\n      patchClass(el, nextValue); // 比对属性\n      break;\n    case \"style\": // {style:{color:'red'}}  {style:{background:'red'}}\n      patchStyle(el, preValue, nextValue);\n      break;\n    default:\n      // 如果不是事件 才是属性\n      if (/^on[^a-z]/.test(key)) {\n        patchEvent(el, key, nextValue); // 事件就是添加和删除 修改\n      } else {\n        patchAttr(el, key, nextValue);\n      }\n\n      break;\n  }\n};\n","import { isArray, isIntegerKey } from \"@vue/shared/src\";\nimport { TriggerOrTypes } from \"./operators\";\n\nexport function effect(fn, options: any = {}) {\n    // 我需要让这个effect变成响应的effect，可以做到数据变化重新执行 \n    const effect = createReactiveEffect(fn, options);\n    if (!options.lazy) { // 默认的effect会先执行\n        effect(); // 响应式的effect默认会先执行一次\n    }\n    return effect;\n}\nlet uid = 0;\nlet activeEffect; // 存储当前的effect\nconst effectStack = []\nfunction createReactiveEffect(fn, options) {\n    const effect = function reactiveEffect() {\n        if (!effectStack.includes(effect)) { // 保证effect没有加入到effectStack中\n            try {\n                effectStack.push(effect);\n                activeEffect = effect;\n                return fn(); // 函数执行时会取值  会执行get方法\n            } finally {\n                effectStack.pop();\n                activeEffect = effectStack[effectStack.length - 1];\n            }\n        }\n    }\n    effect.id = uid++; // 制作一个effect标识 用于区分effect\n    effect._isEffect = true; // 用于标识这个是响应式effect\n    effect.raw = fn; // 保留effect对应的原函数\n    effect.options = options; // 在effect上保存用户的属性\n    return effect;\n}\n// 让，某个对象中的属性 收集当前他对应的effect函数\nconst targetMap = new WeakMap();\nexport function track(target, type, key) { // 可以拿到当前的effect\n    //  activeEffect; // 当前正在运行的effect\n    if (activeEffect === undefined) { // 此属性不用收集依赖，因为没在effect中使用\n        return;\n    }\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n        targetMap.set(target, (depsMap = new Map));\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n        depsMap.set(key, (dep = new Set))\n    }\n    if (!dep.has(activeEffect)) {\n        dep.add(activeEffect);\n    }\n}\n\n// 找属性对应的effect 让其执行 （数组、对象）\nexport function trigger(target, type, key?, newValue?, oldValue?) {\n\n    // 如果这个属性没有 收集过effect，那不需要做任何操作\n    const depsMap = targetMap.get(target);\n    if (!depsMap) return;\n\n    const effects = new Set(); // 这里对effect去重了\n    const add = (effectsToAdd) => {\n        if (effectsToAdd) {\n            effectsToAdd.forEach(effect => effects.add(effect));\n        }\n    }\n    // 我要将所有的 要执行的effect 全部存到一个新的集合中，最终一起执行\n\n    // 1. 看修改的是不是数组的长度 因为改长度影响比较大\n    if (key === 'length' && isArray(target)) {\n        // 如果对应的长度 有依赖收集需要更新\n        depsMap.forEach((dep, key) => {\n            if (key === 'length' || key > newValue) { // 如果更改的长度 小于收集的索引，那么这个索引也需要触发effect重新执行\n                add(dep)\n            }\n        })\n    } else {\n        // 可能是对象\n        if (key !== undefined) { // 这里肯定是修改， 不能是新增\n            add(depsMap.get(key)); // 如果是新增\n        }\n        // 如果修改数组中的 某一个索引 怎么办？\n        switch (type) {  // 如果添加了一个索引就触发长度的更新\n            case TriggerOrTypes.ADD:\n                if (isArray(target) && isIntegerKey(key)) {\n                    add(depsMap.get('length'));\n                }\n        }\n    }\n    effects.forEach((effect: any) => {\n        if(effect.options.scheduler){\n            effect.options.scheduler(effect);\n        }else{\n            effect();\n        }\n    })\n}\n// weakMap {name:'zf',age:12}  (map) =>{name => set(effect),age => set(effect)}\n// {name:'zf',age:12} => name => [effect effect]\n\n\n// 函数调用是一个栈型结构\n// effect(()=>{ // effect1   [effect1]\n//     state.name -> effect1\n//     effect(()=>{ // effect2\n//         state.age -> effect2\n//     })\n//     state.address -> effect1\n// })","import { extend, hasChanged, hasOwn, isArray, isIntegerKey, isObject } from \"@vue/shared\"\nimport { track, trigger } from \"./effect\";\nimport { TrackOpTypes, TriggerOrTypes } from \"./operators\";\nimport { reactive, readonly } from \"./reactive\"\n\n// get 逻辑\n// 针对 浅拷贝和readonly 的一些处理，另外是收集依赖\nconst get = createGetter(false, false)\nconst shallowGet = createGetter(false, true)\nconst readonlyGet = createGetter(true);\nconst showllowReadonlyGet = createGetter(true, true)\n\n// set \n// readonly 不能赋值， 另外就是 触发 依赖的 effect\nconst set = createSetter();\nconst shallowSet = createSetter(true)\n\n// \nexport const mutableHandlers =  {\n  get,\n  set\n}\n\nexport const shallowReactiveHandlers =  {\n  get: shallowGet,\n  set: shallowSet\n}\n\nlet readonlyObj = {\n  set: (target, key) => {\n      console.warn(`set on key ${key} falied`)\n  }\n}\nexport const readonlyHandlers = extend({\n  get: readonlyGet,\n}, readonlyObj)\nexport const shallowReadonlyHandlers = extend({\n  get: showllowReadonlyGet,\n}, readonlyObj)\n\nfunction createGetter( isReadonly = false, shallow = false) {\n  // 这个最好返回箭头函数\n  return function get(target, key, receiver) {\n    const res = Reflect.get(target, key, receiver);\n    if(!isReadonly){\n        // 执行 收集依赖\n        track(target,TrackOpTypes.GET,key)\n    }\n    // 浅拷贝\n    if(shallow) {\n      return res\n    }\n    if(isObject(res)){\n      return isReadonly ? readonly(res) : reactive(res)\n    }\n    return res\n  } \n}\n\nfunction createSetter(shallow = false) {\n  return function set(target, key, value, receiver) {\n\n    const oldValue = target[key]; // 获取老的值\n\n    let hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target,key);\n\n    const result = Reflect.set(target, key, value, receiver); // target[key] = value\n\n\n    if(!hadKey){\n        // 新增 \n        trigger(target,TriggerOrTypes.ADD,key,value);\n    }else if(hasChanged(oldValue,value)){\n        // 修改 \n        trigger(target,TriggerOrTypes.SET,key,value,oldValue)\n    }\n\n\n    // 我们要区分是新增的 还是修改的  vue2 里无法监控更改索引，无法监控数组的长度变化  -》 hack的方法 需要特殊处理\n\n\n    // 当数据更新时 通知对应属性的effect重新执行\n\n\n    return result;\n}\n}\n","import { isObject } from \"@vue/shared\";\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers } from \"./baseHandlers\";\n\nexport const reactive = (target) => {\n  return createReactiveObject(target, false, mutableHandlers);\n};\n\nexport const shallowReactive = (target) => {\n  return createReactiveObject(target, false, shallowReactiveHandlers);\n};\n\nexport const shallowReadonly = (target) => {\n  return createReactiveObject(target, true, readonlyHandlers);\n};\n\nexport const readonly = (target) => {\n  return createReactiveObject(target, true, shallowReadonlyHandlers);\n};\n\nconst reactiveMap = new WeakMap(); // 会自动垃圾回收，不会造成内存泄漏， 存储的key只能是对\nconst readonlyMap = new WeakMap();\n\nexport function createReactiveObject(target, isReadonly, baseHandlers) {\n  // 如果目标不是对象 没法拦截了，reactive这个api只能拦截对象类型\n  // 其他的边界考虑\n  if (!isObject(target)) {\n    return target;\n  }\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap;\n  const existProxy = proxyMap.get(target);\n  if (existProxy) {\n    return existProxy; // 如果已经被代理了 直接返回即可\n  }\n  console.log('baseHandlers', baseHandlers)\n  const proxy  = new Proxy(target, baseHandlers);\n  proxyMap.set(target, proxy)\n  return proxy\n}\n","import { hasChanged, isArray, isObject } from \"@vue/shared/src\";\nimport { track, trigger } from \"./effect\";\nimport { TrackOpTypes, TriggerOrTypes } from \"./operators\";\nimport { reactive } from \"./reactive\";\n\nexport function ref(value) {\n  // 将普通类型变相一个对象， 使用 对象的 get set 方法\n  return createRef(value);\n}\n\nexport function shallowRef(value) {\n  return createRef(value, true)\n}\n\nconst convert = (val) => (isObject(val) ? reactive(val) : val);\n\nclass RefImpl {\n  private _value;\n  public __v_isRef = true; // 产生的实例会被添加 __v_isRef 表示是一个ref属性\n  constructor(public rawValue, public shallow) {\n    this._value = shallow ? rawValue : convert(rawValue);\n  }\n  get value() {\n    track(this, TrackOpTypes.GET, \"value\");\n    return this._value;\n  }\n  set value(newValue) {\n    if (hasChanged(newValue, this.rawValue)) {\n      // 判断老值和新值是否有变化\n      this.rawValue = newValue; // 新值会作为老值\n      this._value = this.shallow ? newValue : convert(newValue);\n      trigger(this, TriggerOrTypes.SET, \"value\", newValue);\n    }\n  }\n}\n\nfunction createRef(rawValue, shallow = false) {\n  return new RefImpl(rawValue, shallow);\n}\n\nclass ObjectRefImpl {\n  public __v_isRef = true;\n  constructor(public target, public key) {}\n  get value(){ // 代理  \n      return this.target[this.key] // 如果原对象是响应式的就会依赖收集\n  }\n  set value(newValue){\n      this.target[this.key] = newValue; // 如果原来对象是响应式的 那么就会触发更新\n  }\n}\n\n// 将响应式对象的某一个key对应的值 转化成ref \nexport function toRef(target, key) { // 可以把一个对象的值转化成 ref类型\n  return new ObjectRefImpl(target, key)\n}\n\nexport function toRefs(object){ // object 可能传递的是一个数组 或者对象\n  const ret = isArray(object) ? new Array(object.length) :{}\n  for(let key in object){\n      ret[key] = toRef(object,key);\n  }\n  return ret;\n}\n\n","import { isFunction } from \"@vue/shared/src\";\nimport { effect, track, trigger } from \"./effect\";\nimport { TrackOpTypes, TriggerOrTypes } from \"./operators\";\n\nclass ComputedRefImpl {\n  private _dirty = true;\n  public _value;\n  public effect;\n  constructor(getter, public setter) {\n    this.effect = effect(getter, {\n      lazy: true, // 默认不执行\n      scheduler: () => {\n        // 走到这一步的话 证明 值反生修改\n        if(!this._dirty){\n          console.log('>>>')\n          this._dirty = true\n          trigger(this,TriggerOrTypes.SET,'value') \n        }\n      }\n    });\n  }\n\n  get value() {\n    // 执行 effect\n    trigger(this,TriggerOrTypes.SET,'value')\n    if(this._dirty){\n      this._value = this.effect();\n      this._dirty = false\n    }\n    track(this,TrackOpTypes.GET,'value')\n    return this._value;\n  }\n  set value(newValue) {\n    this.setter(newValue);\n  }\n}\n\n/**\n *  接受 getter setter 或者一个 function\n */\nexport function computed(getterOrOptions) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n    setter = () => {\n      console.warn(\"computed value must be readonly\");\n    };\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n\n  return new ComputedRefImpl(getter, setter);\n}\n","import { isArray, isObject, isString, ShapeFlags } from \"@vue/shared\"\n\nexport function isVnode(vnode){\n  return vnode.__v_isVnode\n}\n// h(‘div',{style:{color:red}},'children'); //  h方法和createApp类似\nexport const createVNode = (type, props, children = null) => {\n  // 可以 根据 type 来区分是组件还是 普通组件\n\n  // 根据type来区分 是元素还是组件\n\n  // 虚拟DOM 肯定有一个蕾西\n  const shapeFlag = isString(type) ? ShapeFlags.ELEMENT : isObject(type) ? ShapeFlags.STATEFUL_COMPONENT : 0\n  const vnode = { // 一个对象\n    __v_isVnode: true,\n    type,\n    props,\n    children,\n    component: null, //存放组件实例\n    el: null, // 真实dom\n    key: props && props.key, // diff 算法\n    shapeFlag // 判断自己的类型 和 儿子的类型 ； 主要是为了看儿子的类型是啥，做分别的处理， 父的类型是和子 不相同的\n  }\n  normalizeChildren(vnode, children);\n  return  vnode;\n}\n\nfunction normalizeChildren(vnode,children){\n  console.log('normalizeChildren', children)\n  let type = 0;\n  if(children == null){ // 不对儿子进行处理\n\n  } else if(isArray(children)){\n      type = ShapeFlags.ARRAY_CHILDREN;\n  } else{\n      type = ShapeFlags.TEXT_CHILDREN;\n  }\n  vnode.shapeFlag |=  type\n}\n\nexport const Text = Symbol('Text')\nexport function normalizeVNode(child){\n  if(isObject(child)) return child;\n\n  return createVNode(Text,null,String(child));\n}","// import { createVNode } from \"./vnode\"\n\nimport { createVNode } from \"./vnode\"\n\nexport function createAppAPI(render){\n    return function createApp(rootComponent,rootProps){ // 告诉他那个组件那个属性来创建的应用\n      console.log('>>>>>>')\n        const app = {\n            _props:rootProps,\n            _component:rootComponent,\n            _container:null,\n            mount(container){ // 挂载的目的地\n                // let vnode = {}\n                // render(vnode,container);\n\n                // 1.根据组件创建虚拟节点\n                // 2.将虚拟节点和容器获取到后调用render方法进行渲染\n\n                // 创造虚拟节点\n                const vnode = createVNode(rootComponent,rootProps)\n\n                // // 调用render\n                render(vnode,container)\n\n\n                app._container = container\n            }\n        }\n        return app\n    }\n}","import { hasOwn } from \"@vue/shared/src\"\n\nexport const PublicInstanceProxyHandlers = {\n    get({ _: instance }, key) {\n        // 取值时 要访问 setUpState， props ,data\n        const { setupState, props, data } = instance;\n        if (key[0] == '$') {\n            return; // 不能访问$ 开头的变量\n        }\n        if (hasOwn(setupState, key)) {\n            return setupState[key];\n        } else if (hasOwn(props, key)) {\n            return props[key];\n        } else if (hasOwn(data, key)) {\n            return data[key];\n        }\n    },\n    set({ _: instance }, key, value) {\n        const { setupState, props, data } = instance;\n        if (hasOwn(setupState, key)) {\n            setupState[key] = value;\n        } else if (hasOwn(props, key)) {\n            props[key] = value;\n        } else if (hasOwn(data, key)) {\n            data[key] = value;\n        }\n        return true;\n    }\n}","import { isFunction, isObject, ShapeFlags } from \"@vue/shared\";\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\";\n\nexport function createComponentInstance(vnode) {\n  // webcomponent 组件需要有“属性” “插槽”\n  const instance = { // 组件的实例\n      vnode,\n      type: vnode.type, // 用户写的对象\n      props: {}, // props attrs 有什么区别 vnode.props\n      attrs: {},\n      slots: {},\n      ctx: {},\n      data:{},\n      setupState: {}, // 如果setup返回一个对象，这个对象会作为setUpstate\n      render: null,\n      subTree:null, // render函数的返回结果就是subTree\n      isMounted: false // 表示这个组件是否挂载过\n  }\n  instance.ctx = { _: instance } // instance.ctx._\n  return instance;\n}\n\nexport function setupComponent(instance) {\n  const { props, children } = instance.vnode; // {type,props,children}\n\n  // 根据props 解析出 props 和 attrs，将其放到instance上\n  instance.props = props; // initProps()\n  instance.children = children; // 插槽的解析 initSlot()\n\n  // 需要先看下 当前组件是不是有状态的组件， 函数组件\n\n  let isStateful = instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT\n  if (isStateful) { // 表示现在是一个带状态的组件\n      // 调用 当前实例的setup方法，用setup的返回值 填充 setupState和对应的render方法\n      setupStatefulComponent(instance)\n  }\n}\nfunction setupStatefulComponent(instance) {\n  // 1.代理 传递给render函数的参数\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers as any)\n  // 2.获取组件的类型 拿到组件的setup方法\n  let Component = instance.type\n  let { setup } = Component;\n  // ------ 没有setup------\n  if(setup){\n      let setupContext = createSetupContext(instance);\n      const setupResult = setup(instance.props, setupContext); // instance 中props attrs slots emit expose 会被提取出来，因为在开发过程中会使用这些属性\n\n      handleSetupResult(instance,setupResult)\n\n  }else{\n      finishComponentSetup(instance);// 完成组件的启动\n  }\n}\n\nfunction handleSetupResult(instance,setupResult){\n  if(isFunction(setupResult)){\n      instance.render = setupResult\n  }else if(isObject(setupResult)){\n      instance.setupState = setupResult\n  }\n  finishComponentSetup(instance);\n}\n\nfunction finishComponentSetup(instance){\n  let Component = instance.type\n  if(!instance.render){\n      // 对template模板进行编译 产生render函数\n      // instance.render = render;// 需要将生成render函数放在实例上\n      if(!Component.render && Component.template){\n          // 编译 将结果 赋予给Component.render\n      }\n      instance.render = Component.render;\n  }\n\n  // 对vue2.0API做了兼容处理\n  // applyOptions \n}\n\nfunction createSetupContext(instance) {\n  return {\n      attrs: instance.attrs,\n      slots: instance.slots,\n      emit: () => { },\n      expose: () => { }\n  }\n}\n","import { effect } from \"@vue/reactivity\";\nimport { ShapeFlags } from \"@vue/shared\";\nimport { createAppAPI } from \"./apiCreateApp\";\nimport { createComponentInstance, setupComponent } from \"./component\";\nimport { normalizeVNode, Text } from \"./vnode\";\n\nexport function createRenderer(rendererOptions) {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n  } = rendererOptions;\n  // -------------------组件----------------------\n  const setupRenderEfect = (instance, container) => {\n    console.log(\"instance\", instance);\n    effect(function componentEffect() {\n      if (!instance.isMounted) {\n        // 初次渲染\n        let proxyToUse = instance.proxy;\n        let subTree = (instance.subTree = instance.render.call(\n          proxyToUse,\n          proxyToUse\n        ));\n\n        // 用render函数的返回值 继续渲染\n        patch(null, subTree, container);\n      } else {\n        // diff算法  （核心 diff + 序列优化 watchApi 生命周期）\n        // ts 一周\n        // 组件库\n        // 更新逻辑\n      }\n    });\n  };\n  const mountComponent = (initialVNode, container) => {\n    // 组件的渲染流程  最核心的就是调用 setup拿到返回值，获取render函数返回的结果来进行渲染\n    // 1.先有实例\n    const instance = (initialVNode.component =\n      createComponentInstance(initialVNode));\n    // 2.需要的数据解析到实例上\n    setupComponent(instance); // state props attrs render ....\n    // 3.创建一个effect 让render函数执行\n    setupRenderEfect(instance, container);\n  };\n\n  const processComponent = (n1, n2, container) => {\n    if (n1 == null) {\n      // 组件没有上一次的虚拟节点\n      mountComponent(n2, container);\n    } else {\n      // 组件更新流程\n    }\n  };\n\n  // ------------------组件 ------------------\n\n  //----------------- 处理元素-----------------\n\n  // 处理元素\n  const mountChildren = (children, container) => {\n    for (let i = 0; i < children.length; i++) {\n\n        let child = normalizeVNode(children[i]);\n        patch(null, child, container);\n    }\n}\n  const mountElement = (vnode, container) => {\n    // 递归渲染\n    const { props, shapeFlag, type, children } = vnode;\n    let el = (vnode.el = hostCreateElement(type));\n\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key]);\n      }\n    }\n    console.log(\"ShapeFlags.TEXT_CHILDREN\", ShapeFlags.TEXT_CHILDREN);\n    console.log(\"shapeFlag\", shapeFlag);\n    console.log(shapeFlag & ShapeFlags.TEXT_CHILDREN);\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n        hostSetElementText(el, children);// 文本比较简单 直接扔进去即可\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        mountChildren(children, el);\n    }\n    hostInsert(el, container);\n  };\n  const processElement = (n1, n2, container) => {\n    if (n1 == null) {\n      mountElement(n2, container);\n    } else {\n      // 元素更新\n    }\n  };\n\n  //----------------- 处理元素-----------------\n\n  // -----------------文本处理-----------------\n  const processText = (n1, n2, container) => {\n    if (n1 == null) {\n      hostInsert((n2.el = hostCreateText(n2.children)), container);\n    }\n  };\n\n  const patch = (n1, n2, container) => {\n    const { shapeFlag, type } = n2;\n    console.log(\"n2\", n2);\n    switch (type) {\n      case Text:\n        // 操作text\n        processText(n1, n2, container);\n        break;\n      default:\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          processElement(n1, n2, container);\n        } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n          processComponent(n1, n2, container);\n        }\n    }\n  };\n\n  // 告诉core 怎么渲染\n  const render = (vnode, container) => {\n    // core的核心, 根据不同的虚拟节点 创建对应的真实元素\n    // 默认调用render 可能是初始化流程\n    patch(null, vnode, container);\n  };\n  return {\n    createApp: createAppAPI(render),\n  };\n}\n","import { createVNode } from \"@vue/runtime-dom\";\nimport { isArray, isObject } from \"@vue/shared\";\nimport { isVnode } from \"./vnode\";\n\nexport function h(type, propsOrChildren, children) {\n  const l = arguments.length;\n\n  if (l == 2) {\n    // 类型 + 属性 、  类型 + 孩子\n    // 如果propsOrChildren 是数组 直接作为第三个参数\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVnode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      return createVNode(type, propsOrChildren);\n    } else {\n      // 如果第二个参数 不是对象 那一定是孩子\n      return createVNode(type, null, propsOrChildren);\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    } else if (l === 3 && isVnode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n}\n","// runtime-dom 核心就是  提供domAPI方法了\n//操作节点、操作属性的更新\n// 节点操作就是增删改查 \n// 属性操作 添加 删除 更新 (样式、类、事件、其他属性)\nimport { extend } from \"@vue/shared/src\";\nimport { nodeOps } from \"./nodeOps\"; // 对象\nimport { patchProp } from \"./patchProp\"; // 方法\nimport { createRenderer } from '@vue/runtime-core/src'\n\n\n// 渲染时用到的所有方法\nconst rendererOptions = extend({ patchProp }, nodeOps)\n\n// vue中runtime-core 提供了核心的方法 用来处理渲染的，他会使用runtime-dom中的api进行渲染\nexport function createApp(rootComponent, rootProps = null) {\n  const app: any = createRenderer(rendererOptions).createApp(rootComponent,rootProps)\n  let {mount} = app\n  app.mount = function (container) {\n      // // 清空容器的操作 \n      container = nodeOps.querySelector(container);\n      container.innerHTML = '';\n      mount(container); // 函数劫持\n      \n  }\n  return app;\n}\n\nexport * from '@vue/runtime-core';\nexport default {}"],"names":[],"mappings":"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"}